<template>

    <Head>
        <title>Patient Monitoring - Wynacom Information System</title>
    </Head>
    <main class="c-main">
        <div class="container-fluid" v-if="permissions.original.includes('dash_monitoring.regno')">
            <!-- <div class="container-fluid"> -->
            <div class="fade-in">
                <div class="text-center">
                    <h4>Patient Monitoring {{ table_data.cust_branch }}</h4>
                </div>
                <div class="card border-0 rounded-3 shadow-border-top-purple mt-4">
                    <div class="card-body">
                        <div class="text-center">
                            Last Update : {{ formatCompat(last_update) }} <br />
                            Time : {{ time }}
                        </div>
                        <template v-if="isLoading">
                            <div class="page-loader">
                                <div class="loading-spinner">
                                    <div class="spinner-border"></div>
                                    <!-- <div>
                                            <svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 512.000000 512.000000">
                                                <path d="M273.21,162.34c-9.21-.38-22.63,2-32.45,6a76.63,76.63,0,0,0-20.23,12c-2.7-1.46-4.85-2.4-5.33-2.59-3.13-1.19-6.39-2.24-10-3.22-9.14-2.47-19.8-3.36-31.17-3.5-26.34-.32-56,8.32-69.67,15.88-39.9,22-60.2,52.76-45.78,69.36,2.9,3.35,13.37,9.34,24.32,12.28a76.51,76.51,0,0,0,10.24,1.93,31.73,31.73,0,0,0,9.94,0s1.45-.36,1.76-1,.32-2-.6-2.34c-.23-.09-1.86-.45-4-.88s-4.51-1-5.36-1.18c-15-4-40-13.47-24.3-34,3.19-4.17,12.75-12.88,22.11-19.34a137,137,0,0,1,34-16.63,133.72,133.72,0,0,1,30.42-6c9.06-.58,19.85-.39,26,3.05a19.65,19.65,0,0,1,8.48,9.15c1.77,4.2,1.46,10.9,1.46,11.07a53.32,53.32,0,0,1-4.2,22.62c-4.51,10.86-12.9,23.36-21.24,30.14s-17.22,13.66-28,18.87C118.66,294.2,93.9,300,76.13,303.68c-8.35,1.73-14.73,3-19.83,4-3.35.69-3.76,3.16-.73,3.07.53,0,10.31-1.86,25.18-2.82,3.76-.24,7.43-.06,10.34,0,3.11.8,7.6,2,11.42,4.55,6.4,4.24,13.91,12.74,22.58,21.72,2.86,3,7.16,3.82,11.56,3.34,11.22-1.22,48.17-18.52,68.51-21.68a50.6,50.6,0,0,1,10-.61,19.66,19.66,0,0,1,6,1.44c15,5,40.62,20,46.69,20,10.17,0,36.49-3.35,62.7-10.87,24.69-7.09,49.17-18.1,64.45-27.45,10.09-6.17,16.54-13.35,16.48-17-.05-3.33-9.07-15.56-18.19-21-3.66-2.17-7.44-4-11.9-6.84-5.05-3.29-8.66-7.36-8.9-9.44-.9-7.63,13.22-13.92,19.85-15.77,2.75-.77,19.9-3.43,33.18-8.38,10.89-4,16.51-10.36,18.49-12.88,4-5,1.79-12.38,1.79-12.38s-2.82-7.87-12.13-15.34c-8.23-6.61-21.79-12.79-39.05-14.5-13.26-1.31-28.43.21-44.22,3.63a179.13,179.13,0,0,0-47.2,17.76,31.88,31.88,0,0,0-7.5-14.34C291,166.92,282.58,162.74,273.21,162.34Zm-9.13,8.94a74.5,74.5,0,0,1,10.9.45c9.49,1.08,16.16,7.85,17.84,14.06,1.05,3.92-1,7.72-2,9.41a44,44,0,0,1-5.08,6.89c-2.89,3.28-8,7.38-13.51,11.38-6.92,5-9.46,9.66-9.46,9.66s-2.47,6.08-1.28,10.71a44.28,44.28,0,0,0,3.9,9.39s7.6,18.09.95,32.68c-5.55,12.19-16.49,19.44-39.8,28.53-14.89,5.81-38.74,15.11-58.14,15-6.82-.05-20.93-16.51-25.73-22.34,18.43-8.44,49.8-26.15,70-44.51,19.86-18,24.45-36.81,24.63-45.76s-4.86-17.22-10.39-22.07l.25.18s2.54-3.45,8.58-6.64A74.32,74.32,0,0,1,250.78,173,65.74,65.74,0,0,1,264.08,171.28Zm106.35,5.1a67,67,0,0,1,7.49.68c5.76.87,14.47,4.6,18.37,8.13,3,2.67,7.77,7.6,8,14.51.33,7.93-9.06,16.63-14.52,19.8-12.1,7.05-25.91,7.72-36.53,14.72-5.47,3.61-14.52,9.88-13.48,17.51a23.41,23.41,0,0,0,6,12.18,52.09,52.09,0,0,0,12.5,9.26c5.83,3.18,10.24,5.89,14.19,9.63a27.29,27.29,0,0,1,4.7,6.32,25.11,25.11,0,0,1-5,7.72c-12.11,11.46-38.72,23.23-63.5,23.62-10.55.17-22.51-4.1-24.88-4.85-2-.63-14.19-4.73-18.17-7.65-3.39-2.49-2.29-4.83-2.29-4.83s5.38-3.21,12.56-8a187.72,187.72,0,0,0,17.76-13c6.2-5.57,11.17-10.38,13.56-17.26,1.94-5.58,1-13.45,0-17.66a31.3,31.3,0,0,0-3.73-9.56c-2.86-4.67-7.38-9.79-9-13.71-1.45-3.45-3.34-17,6.84-25.77,13.44-11.61,41.2-20,52.33-20.88A127.68,127.68,0,0,1,370.43,176.38Z" fill="#005baa"/>
                                                <path d="M134.38,337.88a12.75,12.75,0,0,1-9.43-3.53c-1.67-1.72-3.29-3.43-4.87-5.1-6.72-7.07-12.52-13.17-17.67-16.58-4-2.63-8.77-3.87-11.36-4.53l-1.68,0c-2.61-.07-5.56-.15-8.61,0-12.18.78-21.08,2.18-24,2.64-.77.12-1.08.17-1.18.17h-.17c-1.42,0-2-.58-2.06-1.14-.1-.82.87-1.88,2.91-2.3l6.44-1.3c3.86-.78,8.23-1.66,13.39-2.73,18.67-3.87,42.75-9.6,63.43-19.61,10.87-5.26,20.12-12.48,27.94-18.84s16.37-18.48,21.18-30.07a53.09,53.09,0,0,0,4.19-22.54s0-.05,0-.12c0-2.1,0-7.37-1.45-10.88a19.66,19.66,0,0,0-8.4-9.07c-5-2.79-13.66-3.81-25.86-3A129.54,129.54,0,0,0,127,195.26l-.29.09A138.22,138.22,0,0,0,92.83,212c-9.25,6.39-18.88,15.15-22.07,19.3-4.49,5.86-5.94,11.24-4.31,16,2.5,7.36,12.1,13.3,28.52,17.67.86.23,3.39.78,5.35,1.18s3.73.79,4,.89a1.39,1.39,0,0,1,.81.8,2.33,2.33,0,0,1-.1,1.79c-.34.68-1.73,1-1.89,1.08a32.22,32.22,0,0,1-10,0,75.69,75.69,0,0,1-10.27-1.94c-10.53-2.83-21.32-8.77-24.41-12.34-4-4.65-5.48-10.43-4.28-17.17,3-17,22.23-37.11,50.11-52.47,14.36-7.91,43.62-15.91,68.37-15.91H174c13.07.16,23,1.27,31.22,3.5,3.65,1,6.93,2.05,10,3.23.36.14,2.41,1,5.24,2.54a77.33,77.33,0,0,1,20.18-12c9.63-3.93,23-6.4,32.53-6,8.65.36,17.34,4.06,22.69,9.64a32.49,32.49,0,0,1,7.5,14.18,181.51,181.51,0,0,1,47-17.65c16.85-3.65,31.75-4.87,44.28-3.63,15.25,1.51,29.52,6.81,39.15,14.53,9.24,7.42,12.15,15.35,12.18,15.43s2.17,7.5-1.81,12.55c-2.52,3.19-8.27,9.11-18.58,12.95-10.14,3.77-22.45,6.2-29.06,7.51-2,.4-3.49.69-4.14.87-6.8,1.89-20.58,8.19-19.71,15.57.22,1.9,3.58,5.9,8.82,9.3,2.75,1.79,5.22,3.14,7.61,4.44,1.49.81,2.89,1.57,4.29,2.4,9.35,5.56,18.22,17.9,18.28,21.14.06,4-7.07,11.35-16.57,17.17-13.33,8.15-37.27,19.65-64.5,27.47-26,7.46-52.36,10.85-62.75,10.87h0c-3.32,0-12-4.22-22.15-9.11-8.29-4-17.69-8.56-24.6-10.9l-.7-.24a17,17,0,0,0-5.29-1.18,50.19,50.19,0,0,0-10,.6c-11.17,1.73-27.31,7.72-41.55,13-11.75,4.36-21.9,8.12-27,8.68C136,337.83,135.19,337.88,134.38,337.88ZM84.94,307.65c1.55,0,3,0,4.44.08l1.72,0c2.65.67,7.51,1.92,11.52,4.58,5.18,3.43,11,9.55,17.72,16.64,1.59,1.66,3.21,3.37,4.88,5.1,3.27,3.39,8,3.66,11.41,3.29,5-.55,15.15-4.31,26.88-8.66,14.26-5.29,30.42-11.29,41.63-13a50.79,50.79,0,0,1,10.07-.6,17.46,17.46,0,0,1,5.39,1.2l.7.24c6.93,2.34,16.34,6.9,24.64,10.92,9.65,4.66,18.76,9.07,22,9.07h0c10.37,0,36.65-3.4,62.64-10.86,27.2-7.8,51.11-19.28,64.41-27.43,10.72-6.55,16.45-13.57,16.4-16.84s-8.84-15.33-18.1-20.83c-1.4-.83-2.79-1.59-4.27-2.4-2.4-1.3-4.88-2.65-7.64-4.45-4.85-3.15-8.72-7.27-9-9.56-1-8.23,14.49-14.45,20-16,.66-.18,2.12-.47,4.16-.87,6.6-1.31,18.89-3.73,29-7.5S441.46,210.14,444,207c3.86-4.9,1.77-12.14,1.75-12.21s-2.91-7.91-12.07-15.26c-9.57-7.68-23.77-13-38.95-14.45-12.49-1.24-27.35,0-44.16,3.62a180.86,180.86,0,0,0-47.15,17.74.2.2,0,0,1-.17,0,.21.21,0,0,1-.1-.14,32,32,0,0,0-7.45-14.24c-5.29-5.
                                                52-13.89-9.17-22.44-9.53-9.49-.39-22.79,2.06-32.38,6a76.48,76.48,0,0,0-20.17,12,.2.2,0,0,1-.21,0c-2.67-1.44-4.83-2.4-5.31-2.59-3.09-1.17-6.36-2.22-10-3.21-8.2-2.22-18.09-3.33-31.13-3.49h-1.39c-24.69,0-53.86,8-68.18,15.86-27.79,15.31-46.92,35.31-49.92,52.21-1.19,6.63.22,12.31,4.19,16.87,3,3.52,13.76,9.41,24.23,12.22a75.09,75.09,0,0,0,10.21,1.93,32.08,32.08,0,0,0,9.88,0c.38-.09,1.41-.43,1.64-.88a2,2,0,0,0,.08-1.49,1,1,0,0,0-.59-.6c-.19-.07-1.62-.4-3.92-.87-1.93-.4-4.47-1-5.37-1.19-16.55-4.39-26.23-10.42-28.78-17.9C64.43,242.5,65.9,237,70.47,231c3.2-4.18,12.87-13,22.15-19.39a139,139,0,0,1,34-16.65l.29-.09A129.61,129.61,0,0,1,157.1,189c12.26-.79,21,.24,26.07,3.07a20.13,20.13,0,0,1,8.55,9.24c1.51,3.58,1.54,8.91,1.48,11v.1A53.46,53.46,0,0,1,189,235.12c-4.83,11.65-13.39,23.79-21.29,30.21s-17.1,13.62-28,18.9C119,294.25,94.85,300,76.16,303.87c-5.16,1.06-9.53,1.94-13.39,2.72l-6.43,1.3c-1.81.37-2.7,1.26-2.63,1.9s.78.83,1.86.8c.08,0,.52-.07,1.13-.17,2.93-.46,11.84-1.86,24-2.64C82.17,307.68,83.58,307.65,84.94,307.65Zm223.14,13c-9.51,0-20-3.46-23.51-4.61l-.82-.27c-.13,0-13.87-4.48-18.22-7.67-3.47-2.55-2.39-5-2.34-5.06a.18.18,0,0,1,.07-.08c.05,0,5.45-3.27,12.55-8a188.49,188.49,0,0,0,17.74-13c6.21-5.58,11.15-10.39,13.5-17.18,1.83-5.24,1.13-12.73,0-17.56l0-.07a31.17,31.17,0,0,0-3.69-9.44c-1.14-1.86-2.56-3.81-3.93-5.7a45.91,45.91,0,0,1-5.11-8c-1.65-3.92-3.07-17.37,6.89-26,13.81-11.93,41.88-20.08,52.44-20.92l2.49-.23a102.36,102.36,0,0,1,14.34-.65h0a66.51,66.51,0,0,1,7.51.68c6,.91,14.66,4.73,18.47,8.17,1.92,1.75,7.79,7.06,8.1,14.65s-8.52,16.43-14.6,20c-5.9,3.43-12.21,5.36-18.32,7.23-6.56,2-12.77,3.9-18.2,7.49-4.7,3.09-14.47,9.53-13.41,17.33a23.28,23.28,0,0,0,5.94,12.07A52.15,52.15,0,0,0,358.39,273c5.88,3.22,10.31,5.95,14.23,9.67a28.12,28.12,0,0,1,4.74,6.36.22.22,0,0,1,0,.16,25.62,25.62,0,0,1-5.05,7.79c-11.81,11.17-38.11,23.26-63.63,23.67Zm-44.58-17.4c-.13.34-.74,2.35,2.25,4.55,3.8,2.79,15.25,6.72,18.11,7.62l.82.27c3.49,1.15,13.95,4.58,23.4,4.58h.61c25.42-.41,51.62-12.45,63.37-23.57a24.75,24.75,0,0,0,4.93-7.58,27.12,27.12,0,0,0-4.63-6.19c-3.89-3.69-8.3-6.41-14.15-9.61a52.59,52.59,0,0,1-12.55-9.3,23.58,23.58,0,0,1-6-12.27c-1.09-8,8.8-14.56,13.56-17.69,5.48-3.62,11.71-5.52,18.3-7.54,6.09-1.86,12.38-3.78,18.24-7.19s14.73-12.14,14.43-19.63-6.09-12.67-8-14.39c-3.76-3.4-12.3-7.17-18.27-8.08a65.8,65.8,0,0,0-7.48-.67,105.14,105.14,0,0,0-14.28.64c-.94.1-1.78.18-2.51.24-10.51.84-38.47,9-52.22,20.83-9.81,8.48-8.41,21.7-6.79,25.55a45.94,45.94,0,0,0,5.07,8c1.38,1.89,2.8,3.85,3.95,5.72a31.89,31.89,0,0,1,3.73,9.54v.07c1.17,4.88,1.87,12.46,0,17.77-2.38,6.87-7.36,11.72-13.61,17.34a187,187,0,0,1-17.78,13C269.28,299.77,264.07,302.91,263.5,303.26Zm-94.69,16.33h-.43c-6.73,0-20.34-15.68-25.88-22.4a.24.24,0,0,1,
                                                0-.16.21.21,0,0,1,.11-.13c20.38-9.33,51-27.22,70-44.48,22.93-20.83,24.5-41.66,24.58-45.63.18-9.33-5.45-17.64-10.33-21.92a.18.18,0,0,1,0-.25.19.19,0,0,1,.25,0l.11.08a28,28,0,0,1,8.53-6.55,74.82,74.82,0,0,1,15.09-5.28,67.53,67.53,0,0,1,13.35-1.74,75.46,75.46,0,0,1,10.92.45c9.59,1.1,16.31,8,18,14.2,1.12,4.14-1.25,8.22-2,9.55a44.89,44.89,0,0,1-5.1,6.93c-3.34,3.78-9.21,8.28-13.54,11.4-6.8,4.88-9.38,9.55-9.4,9.59s-2.43,6.07-1.27,10.59a44.31,44.31,0,0,0,3.88,9.34c.08.2,7.56,18.35,1,32.85-5.41,11.87-15.48,19.09-39.9,28.62C212.19,310.23,188.17,319.59,168.81,319.59Zm-25.87-22.45c5.6,6.77,18.93,22,25.44,22.08h.43c19.29,0,43.27-9.35,57.64-15,24.32-9.49,34.34-16.66,39.71-28.44,6.53-14.34-.89-32.35-1-32.53a44.91,44.91,0,0,1-3.91-9.41c-1.19-4.64,1.19-10.58,1.29-10.83,0-.07,2.65-4.81,9.52-9.74,4.32-3.11,10.16-7.59,13.48-11.35a44.59,44.59,0,0,0,5.06-6.86c.76-1.31,3.07-5.28,2-9.27C291,179.73,284.39,173,275,171.91a76.27,76.27,0,0,0-10.87-.45,67.47,67.47,0,0,0-13.27,1.73,75,75,0,0,0-15,5.24,27.54,27.54,0,0,0-8.43,6.49c4.85,4.42,10.28,12.65,10.1,21.88-.08,4-1.66,25-24.7,45.9C193.83,269.92,163.35,287.77,142.94,297.14Z" fill="#005baa"/>
                                            </svg>
                                        </div> -->
                                </div>
                                <h3>Loading Data</h3>
                            </div>
                        </template>
                        <template v-else>
                            <template v-if="table_data">
                                <div class="row">
                                    <div class="col-2">
                                        <table class="table table-bordered solid display">
                                            <thead>
                                                <tr class="text-center">
                                                    <th colspan="2">
                                                        SPECIMEN COLLECTION
                                                    </th>
                                                </tr>
                                                <tr class="text-center">
                                                    <th>CITO/EA</th>
                                                    <th>NON CITO</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr v-for="(
                                                        data, index
                                                    ) in table_data.sc" class="text-center">
                                                    <template v-for="(
                                                            show, data_key
                                                        ) in data">
                                                        <template v-if="show">
                                                            <template v-if="
                                                                show.type ==
                                                                '1'
                                                            ">
                                                                <td style="background: #ff0000; padding:0px;">
                                                                    <strong>
                                                                        <p class="regno_font">
                                                                            {{
                                                                                show
                                                                                    ? show.reg_no.substr(
                                                                                        show
                                                                                            .reg_no
                                                                                            .length -
                                                                                        4
                                                                                    )
                                                                                    : ""
                                                                            }}
                                                                        </p>
                                                                    </strong>
                                                                </td>
                                                            </template>
                                                            <template v-if="
                                                                show.type ==
                                                                '2'
                                                            ">
                                                                <td style="background: #ffff00; padding:0px;">
                                                                    <strong>
                                                                        <p class="regno_font">
                                                                            {{
                                                                                show
                                                                                    ? show.reg_no.substr(
                                                                                        show
                                                                                            .reg_no
                                                                                            .length -
                                                                                        4
                                                                                    )
                                                                                    : ""
                                                                            }}
                                                                        </p>
                                                                    </strong>
                                                                </td>
                                                            </template>
                                                            <template v-if="
                                                                show.type ==
                                                                '3'
                                                            ">
                                                                <td style="background: #00ff73; padding:0px;">
                                                                    <strong>
                                                                        <p class="regno_font">
                                                                            {{
                                                                                show
                                                                                    ? show.reg_no.substr(
                                                                                        show
                                                                                            .reg_no
                                                                                            .length -
                                                                                        4
                                                                                    )
                                                                                    : ""
                                                                            }}
                                                                        </p>
                                                                    </strong>
                                                                </td>
                                                            </template>
                                                            <template v-if="
                                                                show.type ==
                                                                '4'
                                                            ">
                                                                <td style="background: #00b0f0; padding:0px;">
                                                                    <strong>
                                                                        <p class="regno_font">
                                                                            {{
                                                                                show
                                                                                    ? show.reg_no.substr(
                                                                                        show
                                                                                            .reg_no
                                                                                            .length -
                                                                                        4
                                                                                    )
                                                                                    : ""
                                                                            }}
                                                                        </p>
                                                                    </strong>
                                                                </td>
                                                            </template>
                                                            <template v-if="
                                                                show.type ==
                                                                '5'
                                                            ">
                                                                <td style="background: #e6e6e6; padding:0px;">
                                                                    <strong>
                                                                        <p class="regno_font">
                                                                            {{
                                                                                show
                                                                                    ? show.reg_no.substr(
                                                                                        show
                                                                                            .reg_no
                                                                                            .length -
                                                                                        4
                                                                                    )
                                                                                    : ""
                                                                            }}
                                                                        </p>
                                                                    </strong>
                                                                </td>
                                                            </template>
                                                        </template>
                                                        <template v-else>
                                                            <td></td>
                                                        </template>
                                                    </template>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="col-2">
                                        <table class="table table-bordered display">
                                            <thead>
                                                <tr class="text-center">
                                                    <th colspan="2">
                                                        PROCESS SAMPLE
                                                    </th>
                                                </tr>
                                                <tr class="text-center">
                                                    <th>CITO/EA</th>
                                                    <th>NON CITO</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr v-for="(
                                                        data, index
                                                    ) in table_data.ps" class="text-center">
                                                    <template v-for="(
                                                            show, data_key
                                                        ) in data">
                                                        <template v-if="
                                                            data_key ==
                                                            'cito'
                                                        ">
                                                            <template v-if="show">
                                                                <template v-if="
                                                                    show.type ==
                                                                    '1'
                                                                ">
                                                                    <td style="background: #ff0000; padding:0px;">
                                                                        <strong>
                                                                        <p class="regno_font">
                                                                            {{
                                                                                show
                                                                                    ? show.reg_no.substr(
                                                                                        show
                                                                                            .reg_no
                                                                                            .length -
                                                                                        4
                                                                                    )
                                                                                    : ""
                                                                            }}
                                                                        </p>
                                                                    </strong>
                                                                    </td>
                                                                </template>
                                                                <template v-if="
                                                                    show.type ==
                                                                    '2'
                                                                ">
                                                                    <td style="background: #ffff00; padding:0px;">
                                                                        <strong>
                                                                        <p class="regno_font">
                                                                            {{
                                                                                show
                                                                                    ? show.reg_no.substr(
                                                                                        show
                                                                                            .reg_no
                                                                                            .length -
                                                                                        4
                                                                                    )
                                                                                    : ""
                                                                            }}
                                                                        </p>
                                                                    </strong>
                                                                    </td>
                                                                </template>
                                                                <template v-if="
                                                                    show.type ==
                                                                    '3'
                                                                ">
                                                                    <td style="background: #00ff73; padding:0px;">
                                                                        <strong>
                                                                        <p class="regno_font">
                                                                            {{
                                                                                show
                                                                                    ? show.reg_no.substr(
                                                                                        show
                                                                                            .reg_no
                                                                                            .length -
                                                                                        4
                                                                                    )
                                                                                    : ""
                                                                            }}
                                                                        </p>
                                                                    </strong>
                                                                    </td>
                                                                </template>
                                                                <template v-if="
                                                                    show.type ==
                                                                    '4'
                                                                ">
                                                                    <td style="background: #00b0f0; padding:0px;">
                                                                        <strong>
                                                                        <p class="regno_font">
                                                                            {{
                                                                                show
                                                                                    ? show.reg_no.substr(
                                                                                        show
                                                                                            .reg_no
                                                                                            .length -
                                                                                        4
                                                                                    )
                                                                                    : ""
                                                                            }}
                                                                        </p>
                                                                    </strong>
                                                                    </td>
                                                                </template>
                                                                <template v-if="
                                                                    show.type ==
                                                                    '5'
                                                                ">
                                                                    <td style="background: #e6e6e6; padding:0px;">
                                                                        <strong>
                                                                            <p class="regno_font">
                                                                                {{
                                                                                    show
                                                                                        ? show.reg_no.substr(
                                                                                            show
                                                                                                .reg_no
                                                                                                .length -
                                                                                            4
                                                                                        )
                                                                                        : ""
                                                                                }}
                                                                            </p>
                                                                        </strong>
                                                                    </td>
                                                                </template>
                                                            </template>
                                                            <template v-else>
                                                                <td></td>
                                                            </template>
                                                        </template>
                                                        <template v-else>
                                                            <template v-if="show">
                                                                <template v-if="
                                                                    show.type ==
                                                                    '1'
                                                                ">
                                                                    <td style="background: #ff0000; padding:0px;">
                                                                        <strong>
                                                                        <p class="regno_font">
                                                                            {{
                                                                                show
                                                                                    ? show.reg_no.substr(
                                                                                        show
                                                                                            .reg_no
                                                                                            .length -
                                                                                        4
                                                                                    )
                                                                                    : ""
                                                                            }}
                                                                        </p>
                                                                    </strong>
                                                                    </td>
                                                                </template>
                                                                <template v-if="
                                                                    show.type ==
                                                                    '2'
                                                                ">
                                                                    <td style="background: #ffff00; padding:0px;">
                                                                        <strong>
                                                                            <p class="regno_font">
                                                                                {{
                                                                                    show
                                                                                        ? show.reg_no.substr(
                                                                                            show
                                                                                                .reg_no
                                                                                                .length -
                                                                                            4
                                                                                        )
                                                                                        : ""
                                                                                }}
                                                                            </p>
                                                                        </strong>
                                                                    </td>
                                                                </template>
                                                                <template v-if="
                                                                    show.type ==
                                                                    '3'
                                                                ">
                                                                    <td style="background: #00ff73; padding:0px;">
                                                                        <strong>
                                                                            <p class="regno_font">
                                                                                {{
                                                                                    show
                                                                                        ? show.reg_no.substr(
                                                                                            show
                                                                                                .reg_no
                                                                                                .length -
                                                                                            4
                                                                                        )
                                                                                        : ""
                                                                                }}
                                                                            </p>
                                                                        </strong>
                                                                    </td>
                                                                </template>
                                                                <template v-if="
                                                                    show.type ==
                                                                    '4'
                                                                ">
                                                                    <td style="background: #00b0f0; padding:0px;">
                                                                        <strong>
                                                                            <p class="regno_font">
                                                                                {{
                                                                                    show
                                                                                        ? show.reg_no.substr(
                                                                                            show
                                                                                                .reg_no
                                                                                                .length -
                                                                                            4
                                                                                        )
                                                                                        : ""
                                                                                }}
                                                                            </p>
                                                                        </strong>
                                                                    </td>
                                                                </template>
                                                                <template v-if="
                                                                    show.type ==
                                                                    '5'
                                                                ">
                                                                    <td style="background: #e6e6e6; padding:0px;">
                                                                        <strong>
                                                                            <p class="regno_font">
                                                                                {{
                                                                                    show
                                                                                        ? show.reg_no.substr(
                                                                                            show
                                                                                                .reg_no
                                                                                                .length -
                                                                                            4
                                                                                        )
                                                                                        : ""
                                                                                }}
                                                                            </p>
                                                                        </strong>
                                                                    </td>
                                                                </template>
                                                            </template>
                                                            <template v-else>
                                                                <td></td>
                                                            </template>
                                                        </template>
                                                    </template>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="col-2">
                                        <table class="table table-bordered display">
                                            <thead>
                                                <tr class="text-center">
                                                    <th colspan="2">RESULT</th>
                                                </tr>
                                                <tr class="text-center">
                                                    <th>CITO/EA</th>
                                                    <th>NON CITO</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr v-for="(
                                                        data, index
                                                    ) in table_data.rs" class="text-center">
                                                    <template v-for="(
                                                            show, data_key
                                                        ) in data">
                                                        <template v-if="
                                                            data_key ==
                                                            'cito'
                                                        ">
                                                            <template v-if="show">
                                                                <template v-if="
                                                                    show.type ==
                                                                    '1'
                                                                ">
                                                                    <td style="background: #ff0000; padding:0px;">
                                                                        <strong>
                                                                            <p class="regno_font">
                                                                                {{
                                                                                    show
                                                                                        ? show.reg_no.substr(
                                                                                            show
                                                                                                .reg_no
                                                                                                .length -
                                                                                            4
                                                                                        )
                                                                                        : ""
                                                                                }}
                                                                            </p>
                                                                        </strong>
                                                                    </td>
                                                                </template>
                                                                <template v-if="
                                                                    show.type ==
                                                                    '2'
                                                                ">
                                                                    <td style="background: #ffff00; padding:0px;">
                                                                        <strong>
                                                                            <p class="regno_font">
                                                                                {{
                                                                                    show
                                                                                        ? show.reg_no.substr(
                                                                                            show
                                                                                                .reg_no
                                                                                                .length -
                                                                                            4
                                                                                        )
                                                                                        : ""
                                                                                }}
                                                                            </p>
                                                                        </strong>
                                                                    </td>
                                                                </template>
                                                                <template v-if="
                                                                    show.type ==
                                                                    '3'
                                                                ">
                                                                    <td style="background: #00ff73; padding:0px;">
                                                                        <strong>
                                                                            <p class="regno_font">
                                                                                {{
                                                                                    show
                                                                                        ? show.reg_no.substr(
                                                                                            show
                                                                                                .reg_no
                                                                                                .length -
                                                                                            4
                                                                                        )
                                                                                        : ""
                                                                                }}
                                                                            </p>
                                                                        </strong>
                                                                    </td>
                                                                </template>
                                                                <template v-if="
                                                                    show.type ==
                                                                    '4'
                                                                ">
                                                                    <td style="background: #00b0f0; padding:0px;">
                                                                        <strong>
                                                                            <p class="regno_font">
                                                                                {{
                                                                                    show
                                                                                        ? show.reg_no.substr(
                                                                                            show
                                                                                                .reg_no
                                                                                                .length -
                                                                                            4
                                                                                        )
                                                                                        : ""
                                                                                }}
                                                                            </p>
                                                                        </strong>
                                                                    </td>
                                                                </template>
                                                                <template v-if="
                                                                    show.type ==
                                                                    '5'
                                                                ">
                                                                    <td style="background: #e6e6e6; padding:0px;">
                                                                        <strong>
                                                                            <p class="regno_font">
                                                                                {{
                                                                                    show
                                                                                        ? show.reg_no.substr(
                                                                                            show
                                                                                                .reg_no
                                                                                                .length -
                                                                                            4
                                                                                        )
                                                                                        : ""
                                                                                }}
                                                                            </p>
                                                                        </strong>
                                                                    </td>
                                                                </template>
                                                            </template>
                                                            <template v-else>
                                                                <td></td>
                                                            </template>
                                                        </template>
                                                        <template v-else>
                                                            <template v-if="show">
                                                                <template v-if="
                                                                    show.type ==
                                                                    '1'
                                                                ">
                                                                    <td style="background: #ff0000; padding:0px;">
                                                                        <strong>
                                                                            <p class="regno_font">
                                                                                {{
                                                                                    show
                                                                                        ? show.reg_no.substr(
                                                                                            show
                                                                                                .reg_no
                                                                                                .length -
                                                                                            4
                                                                                        )
                                                                                        : ""
                                                                                }}
                                                                            </p>
                                                                        </strong>
                                                                    </td>
                                                                </template>
                                                                <template v-if="
                                                                    show.type ==
                                                                    '2'
                                                                ">
                                                                    <td style="background: #ffff00; padding:0px;">
                                                                        <strong>
                                                                            <p class="regno_font">
                                                                                {{
                                                                                    show
                                                                                        ? show.reg_no.substr(
                                                                                            show
                                                                                                .reg_no
                                                                                                .length -
                                                                                            4
                                                                                        )
                                                                                        : ""
                                                                                }}
                                                                            </p>
                                                                        </strong>
                                                                    </td>
                                                                </template>
                                                                <template v-if="
                                                                    show.type ==
                                                                    '3'
                                                                ">
                                                                    <td style="background: #00ff73; padding:0px;">
                                                                        <strong>
                                                                            <p class="regno_font">
                                                                                {{
                                                                                    show
                                                                                        ? show.reg_no.substr(
                                                                                            show
                                                                                                .reg_no
                                                                                                .length -
                                                                                            4
                                                                                        )
                                                                                        : ""
                                                                                }}
                                                                            </p>
                                                                        </strong>
                                                                    </td>
                                                                </template>
                                                                <template v-if="
                                                                    show.type ==
                                                                    '4'
                                                                ">
                                                                    <td style="background: #00b0f0; padding:0px;">
                                                                        <strong>
                                                                            <p class="regno_font">
                                                                                {{
                                                                                    show
                                                                                        ? show.reg_no.substr(
                                                                                            show
                                                                                                .reg_no
                                                                                                .length -
                                                                                            4
                                                                                        )
                                                                                        : ""
                                                                                }}
                                                                            </p>
                                                                        </strong>
                                                                    </td>
                                                                </template>
                                                                <template v-if="
                                                                    show.type ==
                                                                    '5'
                                                                ">
                                                                    <td style="background: #e6e6e6; padding:0px;">
                                                                        <strong>
                                                                            <p class="regno_font">
                                                                                {{
                                                                                    show
                                                                                        ? show.reg_no.substr(
                                                                                            show
                                                                                                .reg_no
                                                                                                .length -
                                                                                            4
                                                                                        )
                                                                                        : ""
                                                                                }}
                                                                            </p>
                                                                        </strong>
                                                                    </td>
                                                                </template>
                                                            </template>
                                                            <template v-else>
                                                                <td></td>
                                                            </template>
                                                        </template>
                                                    </template>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="col-2">
                                        <table class="table table-bordered display">
                                            <thead>
                                                <tr class="text-center">
                                                    <th colspan="2">
                                                        VERIFICATION
                                                    </th>
                                                </tr>
                                                <tr class="text-center">
                                                    <th>CITO/EA</th>
                                                    <th>NON CITO</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr v-for="(
                                                        data, index
                                                    ) in table_data.vr" class="text-center">
                                                    <template v-for="(
                                                            show, data_key
                                                        ) in data">
                                                        <template v-if="
                                                            data_key ==
                                                            'cito'
                                                        ">
                                                            <template v-if="show">
                                                                <template v-if="
                                                                    show.type ==
                                                                    '1'
                                                                ">
                                                                    <td style="background: #ff0000; padding:0px;">
                                                                        <strong>
                                                                            <p class="regno_font">
                                                                                {{
                                                                                    show
                                                                                        ? show.reg_no.substr(
                                                                                            show
                                                                                                .reg_no
                                                                                                .length -
                                                                                            4
                                                                                        )
                                                                                        : ""
                                                                                }}
                                                                            </p>
                                                                        </strong>
                                                                    </td>
                                                                </template>
                                                                <template v-if="
                                                                    show.type ==
                                                                    '2'
                                                                ">
                                                                    <td style="background: #ffff00; padding:0px;">
                                                                        <strong>
                                                                            <p class="regno_font">
                                                                                {{
                                                                                    show
                                                                                        ? show.reg_no.substr(
                                                                                            show
                                                                                                .reg_no
                                                                                                .length -
                                                                                            4
                                                                                        )
                                                                                        : ""
                                                                                }}
                                                                            </p>
                                                                        </strong>
                                                                    </td>
                                                                </template>
                                                                <template v-if="
                                                                    show.type ==
                                                                    '3'
                                                                ">
                                                                    <td style="background: #00ff73; padding:0px;">
                                                                        <strong>
                                                                            <p class="regno_font">
                                                                                {{
                                                                                    show
                                                                                        ? show.reg_no.substr(
                                                                                            show
                                                                                                .reg_no
                                                                                                .length -
                                                                                            4
                                                                                        )
                                                                                        : ""
                                                                                }}
                                                                            </p>
                                                                        </strong>
                                                                    </td>
                                                                </template>
                                                                <template v-if="
                                                                    show.type ==
                                                                    '4'
                                                                ">
                                                                    <td style="background: #00b0f0; padding:0px;">
                                                                        <strong>
                                                                            <p class="regno_font">
                                                                                {{
                                                                                    show
                                                                                        ? show.reg_no.substr(
                                                                                            show
                                                                                                .reg_no
                                                                                                .length -
                                                                                            4
                                                                                        )
                                                                                        : ""
                                                                                }}
                                                                            </p>
                                                                        </strong>
                                                                    </td>
                                                                </template>
                                                                <template v-if="
                                                                    show.type ==
                                                                    '5'
                                                                ">
                                                                    <td style="background: #e6e6e6; padding:0px;">
                                                                        <strong>
                                                                            <p class="regno_font">
                                                                                {{
                                                                                    show
                                                                                        ? show.reg_no.substr(
                                                                                            show
                                                                                                .reg_no
                                                                                                .length -
                                                                                            4
                                                                                        )
                                                                                        : ""
                                                                                }}
                                                                            </p>
                                                                        </strong>
                                                                    </td>
                                                                </template>
                                                            </template>
                                                            <template v-else>
                                                                <td></td>
                                                            </template>
                                                        </template>
                                                        <template v-else>
                                                            <template v-if="show">
                                                                <template v-if="
                                                                    show.type ==
                                                                    '1'
                                                                ">
                                                                    <td style="background: #ff0000; padding:0px;">
                                                                        <strong>
                                                                            <p class="regno_font">
                                                                                {{
                                                                                    show
                                                                                        ? show.reg_no.substr(
                                                                                            show
                                                                                                .reg_no
                                                                                                .length -
                                                                                            4
                                                                                        )
                                                                                        : ""
                                                                                }}
                                                                            </p>
                                                                        </strong>
                                                                    </td>
                                                                </template>
                                                                <template v-if="
                                                                    show.type ==
                                                                    '2'
                                                                ">
                                                                    <td style="background: #ffff00; padding:0px;">
                                                                        <strong>
                                                                            <p class="regno_font">
                                                                                {{
                                                                                    show
                                                                                        ? show.reg_no.substr(
                                                                                            show
                                                                                                .reg_no
                                                                                                .length -
                                                                                            4
                                                                                        )
                                                                                        : ""
                                                                                }}
                                                                            </p>
                                                                        </strong>
                                                                    </td>
                                                                </template>
                                                                <template v-if="
                                                                    show.type ==
                                                                    '3'
                                                                ">
                                                                    <td style="background: #00ff73; padding:0px;">
                                                                        <strong>
                                                                            <p class="regno_font">
                                                                                {{
                                                                                    show
                                                                                        ? show.reg_no.substr(
                                                                                            show
                                                                                                .reg_no
                                                                                                .length -
                                                                                            4
                                                                                        )
                                                                                        : ""
                                                                                }}
                                                                            </p>
                                                                        </strong>
                                                                    </td>
                                                                </template>
                                                                <template v-if="
                                                                    show.type ==
                                                                    '4'
                                                                ">
                                                                    <td style="background: #00b0f0; padding:0px;">
                                                                        <strong>
                                                                            <p class="regno_font">
                                                                                {{
                                                                                    show
                                                                                        ? show.reg_no.substr(
                                                                                            show
                                                                                                .reg_no
                                                                                                .length -
                                                                                            4
                                                                                        )
                                                                                        : ""
                                                                                }}
                                                                            </p>
                                                                        </strong>
                                                                    </td>
                                                                </template>
                                                                <template v-if="
                                                                    show.type ==
                                                                    '5'
                                                                ">
                                                                    <td style="background: #e6e6e6; padding:0px;">
                                                                        <strong>
                                                                            <p class="regno_font">
                                                                                {{
                                                                                    show
                                                                                        ? show.reg_no.substr(
                                                                                            show
                                                                                                .reg_no
                                                                                                .length -
                                                                                            4
                                                                                        )
                                                                                        : ""
                                                                                }}
                                                                            </p>
                                                                        </strong>
                                                                    </td>
                                                                </template>
                                                            </template>
                                                            <template v-else>
                                                                <td></td>
                                                            </template>
                                                        </template>
                                                    </template>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="col-2">
                                        <table class="table table-bordered display">
                                            <thead>
                                                <tr class="text-center">
                                                    <th colspan="2">
                                                        AUTHORIZATION
                                                    </th>
                                                </tr>
                                                <tr class="text-center">
                                                    <th>CITO/EA</th>
                                                    <th>NON CITO</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr v-for="(
                                                        data, index
                                                    ) in table_data.au" class="text-center">
                                                    <template v-for="(
                                                            show, data_key
                                                        ) in data">
                                                        <template v-if="
                                                            data_key ==
                                                            'cito'
                                                        ">
                                                            <template v-if="show">
                                                                <template v-if="
                                                                    show.type ==
                                                                    '1'
                                                                ">
                                                                    <td style="background: #ff0000; padding:0px;">
                                                                        <strong>
                                                                            <p class="regno_font">
                                                                                {{
                                                                                    show
                                                                                        ? show.reg_no.substr(
                                                                                            show
                                                                                                .reg_no
                                                                                                .length -
                                                                                            4
                                                                                        )
                                                                                        : ""
                                                                                }}
                                                                            </p>
                                                                        </strong>
                                                                    </td>
                                                                </template>
                                                                <template v-if="
                                                                    show.type ==
                                                                    '2'
                                                                ">
                                                                    <td style="background: #ffff00; padding:0px;">
                                                                        <strong>
                                                                            <p class="regno_font">
                                                                                {{
                                                                                    show
                                                                                        ? show.reg_no.substr(
                                                                                            show
                                                                                                .reg_no
                                                                                                .length -
                                                                                            4
                                                                                        )
                                                                                        : ""
                                                                                }}
                                                                            </p>
                                                                        </strong>
                                                                    </td>
                                                                </template>
                                                                <template v-if="
                                                                    show.type ==
                                                                    '3'
                                                                ">
                                                                    <td style="background: #00ff73; padding:0px;">
                                                                        <strong>
                                                                            <p class="regno_font">
                                                                                {{
                                                                                    show
                                                                                        ? show.reg_no.substr(
                                                                                            show
                                                                                                .reg_no
                                                                                                .length -
                                                                                            4
                                                                                        )
                                                                                        : ""
                                                                                }}
                                                                            </p>
                                                                        </strong>
                                                                    </td>
                                                                </template>
                                                                <template v-if="
                                                                    show.type ==
                                                                    '4'
                                                                ">
                                                                    <td style="background: #00b0f0; padding:0px;">
                                                                        <strong>
                                                                            <p class="regno_font">
                                                                                {{
                                                                                    show
                                                                                        ? show.reg_no.substr(
                                                                                            show
                                                                                                .reg_no
                                                                                                .length -
                                                                                            4
                                                                                        )
                                                                                        : ""
                                                                                }}
                                                                            </p>
                                                                        </strong>
                                                                    </td>
                                                                </template>
                                                                <template v-if="
                                                                    show.type ==
                                                                    '5'
                                                                ">
                                                                    <td style="background: #e6e6e6; padding:0px;">
                                                                        <strong>
                                                                            <p class="regno_font">
                                                                                {{
                                                                                    show
                                                                                        ? show.reg_no.substr(
                                                                                            show
                                                                                                .reg_no
                                                                                                .length -
                                                                                            4
                                                                                        )
                                                                                        : ""
                                                                                }}
                                                                            </p>
                                                                        </strong>
                                                                    </td>
                                                                </template>
                                                            </template>
                                                            <template v-else>
                                                                <td></td>
                                                            </template>
                                                        </template>
                                                        <template v-else>
                                                            <template v-if="show">
                                                                <template v-if="
                                                                    show.type ==
                                                                    '1'
                                                                ">
                                                                    <td style="background: #ff0000; padding:0px;">
                                                                        <strong>
                                                                            <p class="regno_font">
                                                                                {{
                                                                                    show
                                                                                        ? show.reg_no.substr(
                                                                                            show
                                                                                                .reg_no
                                                                                                .length -
                                                                                            4
                                                                                        )
                                                                                        : ""
                                                                                }}
                                                                            </p>
                                                                        </strong>
                                                                    </td>
                                                                </template>
                                                                <template v-if="
                                                                    show.type ==
                                                                    '2'
                                                                ">
                                                                    <td style="background: #ffff00; padding:0px;">
                                                                        <strong>
                                                                            <p class="regno_font">
                                                                                {{
                                                                                    show
                                                                                        ? show.reg_no.substr(
                                                                                            show
                                                                                                .reg_no
                                                                                                .length -
                                                                                            4
                                                                                        )
                                                                                        : ""
                                                                                }}
                                                                            </p>
                                                                        </strong>
                                                                    </td>
                                                                </template>
                                                                <template v-if="
                                                                    show.type ==
                                                                    '3'
                                                                ">
                                                                    <td style="background: #00ff73; padding:0px;">
                                                                        <strong>
                                                                            <p class="regno_font">
                                                                                {{
                                                                                    show
                                                                                        ? show.reg_no.substr(
                                                                                            show
                                                                                                .reg_no
                                                                                                .length -
                                                                                            4
                                                                                        )
                                                                                        : ""
                                                                                }}
                                                                            </p>
                                                                        </strong>
                                                                    </td>
                                                                </template>
                                                                <template v-if="
                                                                    show.type ==
                                                                    '4'
                                                                ">
                                                                    <td style="background: #00b0f0; padding:0px;">
                                                                        <strong>
                                                                            <p class="regno_font">
                                                                                {{
                                                                                    show
                                                                                        ? show.reg_no.substr(
                                                                                            show
                                                                                                .reg_no
                                                                                                .length -
                                                                                            4
                                                                                        )
                                                                                        : ""
                                                                                }}
                                                                            </p>
                                                                        </strong>
                                                                    </td>
                                                                </template>
                                                                <template v-if="
                                                                    show.type ==
                                                                    '5'
                                                                ">
                                                                    <td style="background: #e6e6e6; padding:0px;">
                                                                        <strong>
                                                                            <p class="regno_font">
                                                                                {{
                                                                                    show
                                                                                        ? show.reg_no.substr(
                                                                                            show
                                                                                                .reg_no
                                                                                                .length -
                                                                                            4
                                                                                        )
                                                                                        : ""
                                                                                }}
                                                                            </p>
                                                                        </strong>
                                                                    </td>
                                                                </template>
                                                            </template>
                                                            <template v-else>
                                                                <td></td>
                                                            </template>
                                                        </template>
                                                    </template>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="col-2">
                                        <table class="table table-bordered display">
                                            <thead>
                                                <tr class="text-center">
                                                    <th>KRITIS</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr v-for="(
                                                        data, index
                                                    ) in table_data.kr" class="text-center">
                                                    <template v-if="data.type == '1'">
                                                        <td style="
                                                                background: #f4b084; padding:0px;
                                                            ">
                                                            <strong>
                                                                <p class="regno_font">
                                                                    {{
                                                                        data
                                                                            ? data.reg_no.substr(
                                                                                data
                                                                                    .reg_no
                                                                                    .length -
                                                                                4
                                                                            )
                                                                            : ""
                                                                    }}
                                                                </p>
                                                            </strong>
                                                            <!-- <h4>
                                                                <strong>
                                                                    {{
                                                                        data.reg_no.substr(
                                                                            data
                                                                                .reg_no
                                                                                .length -
                                                                            4
                                                                        )
                                                                    }}
                                                                </strong>
                                                            </h4> -->
                                                        </td>
                                                    </template>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </template>
                        </template>
                    </div>
                </div>
                <div class="card border-0 rounded-3 shadow-border-top-purple mt-4">
                    <div class="card-body">
                        <template v-if="isLoading">
                            <div class="page-loader">
                                <div class="loading-spinner">
                                    <div class="spinner-border"></div>
                                </div>
                                <h3>Loading Data</h3>
                            </div>
                        </template>
                        <template v-else>
                            <div>
                                <table class="table table-bordered solid display">
                                    <thead>
                                        <tr class="text-center">
                                            <th style="width: 5%;">No</th>
                                            <th>Regno</th>
                                            <th>TAT Time</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr v-for="(
                                                data, index
                                            ) in table_data.tat" class="text-center">
                                            <td><p class="regno_font">{{ data.seq_no }}</p></td>
                                            <td><p class="regno_font">{{ data.reg_no }}</p></td>
                                            <td><p class="regno_font">{{ data.tat }}</p></td>
                                            <!-- <td><p class="regno_font">{{ convert(data.tat) }}</p></td> -->
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </template>
                    </div>
                </div>
            </div>
        </div>

        <!-- The Modal Refresh Rate -->
        <div class="modal" id="intervalModal" ref="intervalModal">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <!-- Modal Header -->
                    <div class="modal-header">
                        <h4 class="modal-title">Set Refresh Interval</h4>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <!-- Modal body -->
                    <div class="modal-body">
                        <!-- <form @submit.prevent="submitInterval"> -->
                        <div class="mb-3">
                            <label class="fw-bold">Refresh Interval ( In Minutes)</label>
                            <input class="form-control" v-model="refreshRate" type="number" min="1" />
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-primary shadow-sm rounded-sm" type="button" @click="changeInterval"
                                data-bs-dismiss="modal">
                                Save
                            </button>
                            <button type="button" class="btn btn-danger" data-bs-dismiss="modal">
                                Close
                            </button>
                        </div>
                        <!-- </form> -->
                    </div>
                    <!-- Modal footer -->
                </div>
            </div>
        </div>
        <!-- End of Modal Refresh Rate -->
    </main>
</template>

<script>
//import layout
import LayoutApp from "../../../Layouts/App.vue";

import { onMounted, reactive, ref } from "vue";

import { Inertia } from "@inertiajs/inertia";

//import Heade and useForm from Inertia
import { Head } from "@inertiajs/inertia-vue3";

import axios from "axios";

import Swal from "sweetalert2";

export default {
    //layout
    layout: LayoutApp,

    //register component
    components: {
        Head,
    },

    props: {
        auth: Object,
        permissions: Array,
    },

    data: () => ({
        table_data: [],
        last_update: "",
        time: "",
        interval: "",
        reload: "",
        refreshRate: 0,
        dataLength: 15,
        timeCount: 0,
        isLoading: false,
    }),

    // mounted() {
    //     this.get_monitoring_data();
    // },

    computed: {},

    created() {
        this.get_monitoring_data();
        this.interval = setInterval(() => {
            this.checkTime();
            this.time = Intl.DateTimeFormat(navigator.language, {
                hour: "numeric",
                minute: "numeric",
                second: "numeric",
                hourCycle: "h23", // 24-hour format
            }).format();
        }, 1000);
    },

    methods: {
        isMobile() {
            if (
                /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(
                    navigator.userAgent
                )
            ) {
                return true;
            } else {
                return false;
            }
        },

        formatDate(dates) {
            var date = new Date(dates);
            var ms = [
                "Jan",
                "Feb",
                "Mar",
                "Apr",
                "May",
                "Jun",
                "Jul",
                "Aug",
                "Sep",
                "Oct",
                "Nov",
                "Dec",
            ];
            var result =
                (date.getDate() > 9 ? "" : "0") +
                date.getDate() +
                "-" +
                ms[date.getMonth()] +
                "-" +
                date.getFullYear();
            return result;
        },

        formatCompat(dates) {
            if (dates) {
                var date = new Date(dates);
                var ms = [
                    "Jan",
                    "Feb",
                    "Mar",
                    "Apr",
                    "May",
                    "Jun",
                    "Jul",
                    "Aug",
                    "Sep",
                    "Oct",
                    "Nov",
                    "Dec",
                ];
                var result =
                    (date.getDate() > 9 ? "" : "0") +
                    date.getDate() +
                    "-" +
                    ms[date.getMonth()] +
                    "-" +
                    date.getFullYear() +
                    "/" +
                    (date.getHours() > 9 ? "" : "0") +
                    date.getHours() +
                    ":" +
                    (date.getMinutes() > 9 ? "" : "0") +
                    date.getMinutes();
                return result;
            }
        },

        checkTime() {
            if (this.refreshRate > 0) {
                if (Math.floor(Date.now() / 1000) % 60 == 0) {
                    this.timeCount += 1;
                    console.log("Time Count : " + this.timeCount);
                    console.log("Refresh Interval : " + this.refreshRate);
                }
                if (this.timeCount == this.refreshRate) {
                    console.log("Check Time");
                    this.get_monitoring_data();
                }
            }
            // console.log(Math.floor(Date.now() / 1000) % 60);
        },

        get_monitoring_data() {
            this.isLoading = true;
            console.log("Loaded : " + Date.now());
            this.timeCount = 0;
            var UrlOrigin = window.location.origin;
            axios
                .get(
                    UrlOrigin +
                    `/api/dashboard/get_data/${this.auth.user.email}`, {
                        headers: {
                            'Connection': 'close'
                        }
                    }
                )
                .then((response) => {
                    this.table_data = response.data.data;
                    this.last_update = response.data.data.last_update;
                    this.isLoading = false;
                })
                .catch((error) => {
                    // Handle error
                    this.isLoading = false; // Stop loading after error
                    Swal.fire({
                        title: "Error!",
                        text: "Fetch data failed.",
                        icon: "error",
                        showConfirmButton: false,
                        timer: 2000,
                    });
                });
        },

        changeInterval() {
            Swal.fire({
                title: "Success!",
                text:
                    "Refresh Interval changed to " +
                    this.refreshRate +
                    " minutes",
                icon: "success",
                showConfirmButton: false,
                timer: 2000,
            });
            if (this.refreshRate > 0) {
                this.timeCount == this.refreshRate;
            }
        },

        convert(time_res) {
            console.log(time_res)
            const days = Math.floor(Math.abs(time_res) / 86400);
            const hours = Math.floor((Math.abs(time_res) % 86400) / 3600);
            const minutes = Math.floor((Math.abs(time_res) % 3600) / 60);
            const seconds = Math.abs(time_res) % 60;
            if(time_res>0){
                // const days = Math.floor(time_res / 86400);
                // const hours = Math.floor((time_res % 86400) / 3600);
                // const minutes = Math.floor((time_res % 3600) / 60);
                // const seconds = time_res % 60;
                var result = (days ? (days<10 ? '0'+days : days) + ':' : '') + (hours ? (hours<10 ? '0'+hours : hours) + ':' : '00:') + (minutes ? (minutes<10 ? '0'+minutes : minutes) + ':' : '00:')+(seconds<10 ? '0'+seconds : seconds);
            } else if(time_res<0) {
                var result = "-" + (days ? (days<10 ? '0'+days : days) + ':' : '') + (hours ? (hours<10 ? '0'+hours : hours) + ':' : '00:') + (minutes ? (minutes<10 ? '0'+minutes : minutes) + ':' : '00:')+(seconds<10 ? '0'+seconds : seconds);
            } else {
                var result = "-";
            }

            return result;
        },
    },

    beforeDestroy() {
        clearInterval(this.interval);
    },

    setup(props) {
        const form = reactive({
            reg_no: props.newRegno,
            type: "",
            sc: "",
            ps: "",
            rs: "",
            vr: "",
            au: "",
            kr: "",
        });

        return {
            form,
        };
    },
};
</script>

<style>
h4{
    margin-bottom: 0;
}

h3{
    margin-bottom: 0;
}

/* .bgred {
    background: #ff0000;
    background-color: #ff0000;
}

.bgyellow {
    background: #ffff00;
}

.bggreen {
    background: #00ff73;
}

.bgblue {
    background: #00b0f0;
} */

.regno_font {
    font-size: 32px;
    margin-bottom: 0;
}

.myTicket:hover {
    background-color: blue;
    color: white;
}

.count {
    position: relative;
    top: -30px;
    color: white;
    font-size: 20px;
}

.count2 {
    position: relative;
    top: -20px;
    padding: 10px 50px 10px 50px;
    border-radius: 10%;
    color: white;
    background-color: black;
    font-size: 40px;
}

.myTicket:hover .count {
    background-color: white;
    color: black;
}

.myTicket:hover .count2 {
    background-color: blue;
    color: white;
}
</style>
